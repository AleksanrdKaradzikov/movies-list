(this["webpackJsonpmovies-list"]=this["webpackJsonpmovies-list"]||[]).push([[0],{15:function(e,t,a){e.exports={MoviewItem:"MoviewItem_MoviewItem__a6RQZ","MoviewItem__hide-block":"MoviewItem_MoviewItem__hide-block__BiNuD","MoviewItem__image-wrap":"MoviewItem_MoviewItem__image-wrap__2pMf4",MoviewItem__info:"MoviewItem_MoviewItem__info__2XHCX","MoviewItem__hide-button":"MoviewItem_MoviewItem__hide-button__1287Y","MoviewItem__comment-button":"MoviewItem_MoviewItem__comment-button__2Eulc",MoviewItem__image:"MoviewItem_MoviewItem__image__23F9y","MoviewItem__info-wrap":"MoviewItem_MoviewItem__info-wrap__2yquA",MoviewItem__title:"MoviewItem_MoviewItem__title__3nwkE",MoviewItem__year:"MoviewItem_MoviewItem__year__G9uhC",MoviewItem__qualitys:"MoviewItem_MoviewItem__qualitys__3uS3_",MoviewItem__quality:"MoviewItem_MoviewItem__quality__GtySu"}},16:function(e,t,a){e.exports={Loader:"Loader_Loader__3w7V8",rotate:"Loader_rotate__3QseU",Loader__path:"Loader_Loader__path__18BnQ",dash:"Loader_dash__1ztii"}},18:function(e,t,a){e.exports={Pagination:"Pagination_Pagination__1NGIo","Pagination--hide":"Pagination_Pagination--hide__1ypMe","Pagination__disabled-block":"Pagination_Pagination__disabled-block__11Y3S",Pagination__paginate:"Pagination_Pagination__paginate__L0CLr","Pagination__paginate-item":"Pagination_Pagination__paginate-item__25Ygj","Pagination__paginate-item-tab":"Pagination_Pagination__paginate-item-tab__3xZ-8","Pagination__paginate-item-tab--disable":"Pagination_Pagination__paginate-item-tab--disable__1x_JF","Pagination__paginate-link":"Pagination_Pagination__paginate-link__frw4Z","Pagination__paginate-link--active":"Pagination_Pagination__paginate-link--active__2fixK"}},19:function(e,t,a){e.exports={MoviesView:"MoviesView_MoviesView__1X9VA",MoviesView__heading:"MoviesView_MoviesView__heading__2WLWy",MoviesView__loader:"MoviesView_MoviesView__loader__3Ipd2","MoviesView__loader--hide":"MoviesView_MoviesView__loader--hide__3eeBi",MoviesView__data:"MoviesView_MoviesView__data__3u1gC","MoviesView__data--hide":"MoviesView_MoviesView__data--hide__2qdxe",MoviesView__pagination:"MoviesView_MoviesView__pagination__3a5ej","MoviesView__pagination--bottom":"MoviesView_MoviesView__pagination--bottom__3BqX_"}},20:function(e,t,a){e.exports={CommentModalView:"CommentModalView_CommentModalView__3GADv","CommentModalView--show":"CommentModalView_CommentModalView--show__1VIGT",CommentModalView__window:"CommentModalView_CommentModalView__window__3iiMJ",CommentModalView__heading:"CommentModalView_CommentModalView__heading__1NG1Q","CommentModalView__empty-block":"CommentModalView_CommentModalView__empty-block__oVrhh","CommentModalView__close-btn":"CommentModalView_CommentModalView__close-btn__q6b3b",CommentModalView__form:"CommentModalView_CommentModalView__form__1rDdR",CommentModalView__textarea:"CommentModalView_CommentModalView__textarea__Kpj7S","CommentModalView__button-wrap":"CommentModalView_CommentModalView__button-wrap__3Hqaf","CommentModalView__button-send":"CommentModalView_CommentModalView__button-send__Qf-CD","CommentModalView__comments-list":"CommentModalView_CommentModalView__comments-list__dmkSB","CommentModalView__list-item":"CommentModalView_CommentModalView__list-item__2ziBq",CommentModalView__info:"CommentModalView_CommentModalView__info___8GRq","CommentModalView__delete-btn":"CommentModalView_CommentModalView__delete-btn__ZZII_"}},21:function(e,t,a){e.exports={App:"App_App__2mBMi"}},30:function(e,t,a){},31:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),o=a(9),c=a.n(o),_=a(3),s=a.n(_),l=a(5),r=a.n(l),m=a(6),d=a(12),u=a(2),b=a(8),j=i.a.createContext(),v=a(22),w=a(13),p=a(14),g=["page","limit"],h="".concat("https://yts.mx/").concat("/api/v2"),M=function(){function e(){Object(w.a)(this,e)}return Object(p.a)(e,[{key:"fetchData",value:function(){var e=Object(m.a)(r.a.mark((function e(t){var a,n,i,o,c,_,s,l,m,d,u,b;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.apiName,n=void 0===a?"/list_movies.json":a,i=t.params,o=void 0===i?"":i,c=t.method,_=void 0===c?"GET":c,s=t.body,l=t.headers,m=void 0===l?{}:l,d="".concat(h).concat(n).concat(o),e.prev=2,e.next=5,fetch(d,{method:_,headers:m,body:s});case 5:return u=e.sent,e.next=8,u.json();case 8:return b=e.sent,e.abrupt("return",b);case 12:throw e.prev=12,e.t0=e.catch(2),console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443 ".concat(d)),e.t0;case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"buildParams",value:function(e){return Object.keys(e).reduce((function(t,a,n,i){return"".concat(t).concat(a,"=").concat(e[a]).concat(n===i.length-1?"":"&")}),"?")}},{key:"getMovies",value:function(){var e=Object(m.a)(r.a.mark((function e(){var t,a,n,i,o,c,_,s=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},a=t.page,n=void 0===a?1:a,i=t.limit,o=void 0===i?20:i,c=Object(v.a)(t,g),e.prev=1,e.next=4,this.fetchData({params:this.buildParams(Object(u.a)({page:n,limit:o},c))});case 4:return _=e.sent,e.abrupt("return",_);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",Promise.reject(e.t0));case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),O=new M,f=a(4);function x(){return Object(n.useContext)(j)}var C=a(15),V=a.n(C),N=a(0),I=s.a.bind(V.a),k="MoviewItem",y=function(e){var t=e.title,a=e.year,n=e.image,i=e.qualitys,o=e.isHide,c=e.id,_=e.commentsCount,s=x(),l=s.handleToggleHideMoview,r=s.setModalData;return Object(N.jsx)("div",{className:I(k),children:o?Object(N.jsxs)("div",{className:I("".concat(k,"__hide-block")),children:[Object(N.jsx)("button",{onClick:function(){l(c)},className:I("".concat(k,"__hide-button")),children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0444\u0438\u043b\u044c\u043c"}),Object(N.jsx)("h4",{children:"\u0424\u0438\u043b\u044c\u043c \u0441\u043a\u0440\u044b\u0442 \u043e\u0442 \u043f\u043e\u043a\u0430\u0437\u0430"})]}):Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)("div",{className:I("".concat(k,"__image-wrap")),children:[Object(N.jsx)("img",{className:I("".concat(k,"__image")),src:n,alt:t}),Object(N.jsxs)("div",{className:I("".concat(k,"__info")),children:[Object(N.jsx)("button",{onClick:function(){l(c)},className:I("".concat(k,"__hide-button")),children:"\u0421\u043a\u0440\u044b\u0442\u044c \u0444\u0438\u043b\u044c\u043c"}),Object(N.jsxs)("button",{onClick:function(){r({isShowModal:!0,currentId:c})},className:I("".concat(k,"__comment-button")),children:["\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c ",_||""]})]})]}),Object(N.jsxs)("div",{className:I("".concat(k,"__info-wrap")),children:[Object(N.jsx)("p",{className:I("".concat(k,"__title")),children:t}),Object(N.jsxs)("span",{className:I("".concat(k,"__year")),children:["\u0413\u043e\u0434 \u0432\u044b\u0445\u043e\u0434\u0430: ",a]}),Object(N.jsx)("div",{className:I("".concat(k,"__qualitys")),children:i.map((function(e){return Object(N.jsx)("span",{className:I("".concat(k,"__quality")),children:e},e)}))})]})]})})},P=a(16),L=a.n(P),S=s.a.bind(L.a),D="Loader",q=function(){return Object(N.jsx)("svg",{className:S(D),viewBox:"0 0 50 50",children:Object(N.jsx)("circle",{className:S("".concat(D,"__path")),cx:"25",cy:"25",r:"20",fill:"none",strokeWidth:"5"})})},H=a(17),B=a.n(H),G=a(18),A=a.n(G),E=s.a.bind(A.a),J="Pagination",Z=function(){var e=x(),t=e.isLoadingData,a=e.pagination,n=a.totalPages,i=a.page,o=e.handleChangePage;return null===n?null:Object(N.jsxs)("div",{className:E(J,Object(f.a)({},"".concat(J,"--hide"),t)),children:[t&&Object(N.jsx)("div",{className:E("".concat(J,"__disabled-block"))}),Object(N.jsx)(B.a,{disableInitialCallback:!0,forcePage:i-1,containerClassName:E("".concat(J,"__paginate")),pageClassName:E("".concat(J,"__paginate-item")),breakClassName:E("".concat(J,"__paginate-item")),breakLinkClassName:E("".concat(J,"__paginate-link")),pageLinkClassName:E("".concat(J,"__paginate-link")),activeLinkClassName:E("".concat(J,"__paginate-link--active")),previousLinkClassName:E("".concat(J,"__paginate-item-tab")),nextLinkClassName:E("".concat(J,"__paginate-item-tab")),disabledClassName:E("".concat(J,"__paginate-item-tab--disable")),breakLabel:"...",nextLabel:"\u0421\u043b\u0435\u0434\u0443\u0449\u0430\u044f >",onPageChange:function(e){var a=e.selected;t||(o(a+1),window.scrollTo(0,0))},pageRangeDisplayed:5,pageCount:n,previousLabel:"< \u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0430\u044f",renderOnZeroPageCount:null})]})},Q=a(19),R=a.n(Q),T=s.a.bind(R.a),X="MoviesView",F=function(){var e=x(),t=e.movies,a=e.isLoadingData;return Object(N.jsxs)("section",{className:T(X),children:[Object(N.jsx)("h2",{className:T("".concat(X,"__heading")),children:"\u0421\u043f\u0438\u0441\u043e\u043a \u0444\u0438\u043b\u044c\u043c\u043e\u0432"}),Object(N.jsx)("div",{className:T("".concat(X,"__pagination")),children:Object(N.jsx)(Z,{})}),Object(N.jsx)("div",{className:T("".concat(X,"__data"),"row",Object(f.a)({},"".concat(X,"__data--hide"),a)),children:t.map((function(e){var t=e.id,a=e.title,n=e.medium_cover_image,i=e.year,o=e.torrents,c=e.isHide,_=void 0!==c&&c,s=e.comments;return Object(N.jsx)("div",{className:"col",children:Object(N.jsx)(y,{id:t,commentsCount:s.length,isHide:_,image:n,title:a,year:i,qualitys:o.map((function(e){return e.quality}))})},t)}))}),Object(N.jsx)("div",{className:T("".concat(X,"__pagination"),Object(f.a)({},"".concat(X,"__pagination--top"),!0)),children:Object(N.jsx)(Z,{})}),Object(N.jsx)("div",{className:T("".concat(X,"__loader"),Object(f.a)({},"".concat(X,"__loader--hide"),!a)),children:Object(N.jsx)(q,{})})]})},W=a(20),Y=a.n(W),z=s.a.bind(Y.a),K="CommentModalView",U=function(){var e=x(),t=e.modalData,a=t.isShowModal,i=t.currentId,o=e.movies,c=e.deleteComment,_=e.setModalData,s=e.addComment,l=Object(n.useRef)(null),r=Object(n.useMemo)((function(){return o.find((function(e){return e.id===i}))}),[i,o]),m=function(e){var t=e.target;l.current.contains(t)&&l.current!==t&&!t.classList.contains(z("".concat(K,"__close-btn")))||_({currentId:null,isShowModal:!1})},d=r&&0===r.comments.length;return Object(N.jsx)("div",{ref:l,className:z(K,Object(f.a)({},"".concat(K,"--show"),a)),onClick:m,children:Object(N.jsxs)("div",{className:z("".concat(K,"__window")),children:[Object(N.jsx)("button",{type:"button",className:z("".concat(K,"__close-btn")),onClick:m,children:"\xd7"}),Object(N.jsxs)("h2",{className:z("".concat(K,"__heading")),children:["\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432: ",(null===r||void 0===r?void 0:r.comments.length)||0]}),Object(N.jsxs)("div",{className:z("".concat(K,"__comments")),children:[d?Object(N.jsx)("div",{className:z("".concat(K,"__empty-block")),children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432 \u043f\u043e\u043a\u0430 \u043d\u0435\u0442, \u0431\u0443\u0434\u0442\u0435 \u043f\u0435\u0440\u0432\u044b\u043c"}):Object(N.jsx)("ul",{className:z("".concat(K,"__comments-list")),children:null===r||void 0===r?void 0:r.comments.map((function(e){var t=e.id,a=e.dateCreated,n=e.text;return Object(N.jsxs)("li",{className:z("".concat(K,"__list-item")),children:[Object(N.jsxs)("p",{className:z("".concat(K,"__info")),children:["\u0414\u0430\u0442\u0430 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f: ",a]}),Object(N.jsxs)("p",{className:z("".concat(K,"__info")),children:["\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439: ",n]}),Object(N.jsx)("button",{className:z("".concat(K,"__delete-btn")),onClick:function(){return c(i,t)},children:"\xd7"})]},t)}))}),Object(N.jsxs)("form",{className:z("".concat(K,"__form")),onSubmit:function(e){e.preventDefault();var t={id:"".concat(i,"-").concat(Date.now()),text:e.target.elements[0].value,dateCreated:(new Date).toLocaleDateString()};s(i,t),e.target.reset()},children:[Object(N.jsx)("textarea",{className:z("".concat(K,"__textarea")),required:!0,name:"comment",placeholder:"\u0422\u0435\u043a\u0441\u0442 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f...",minLength:5}),Object(N.jsx)("div",{className:z("".concat(K,"__button-wrap")),children:Object(N.jsx)("button",{className:z("".concat(K,"__button-send")),type:"submit",children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})})]})]})]})})},$="hideMovies",ee="commentsMoview",te=document.getElementById("portal"),ae=function(e){return JSON.parse(localStorage.getItem(e)||"{}")},ne=function(e,t){0===Object.keys(t).length?localStorage.removeItem(e):localStorage.setItem(e,JSON.stringify(t))},ie=function(){var e=Object(n.useState)(!1),t=Object(b.a)(e,2),a=t[0],i=t[1],c=Object(n.useState)({currentId:null,isShowModal:!1}),_=Object(b.a)(c,2),s=_[0],l=_[1],v=Object(n.useState)({page:1,limit:20,totalPages:null,totalItems:null}),w=Object(b.a)(v,2),p=w[0],g=w[1],h=Object(n.useState)([]),M=Object(b.a)(h,2),f=M[0],x=M[1],C=Object(n.useCallback)((function(e){g((function(t){return Object(u.a)(Object(u.a)({},t),{},{page:e})}))}),[]),V=Object(n.useCallback)((function(e){x((function(t){return t.map((function(t){return t.id===e?Object(u.a)(Object(u.a)({},t),{},{isHide:void 0===t.isHide||!t.isHide}):t}))}));var t=ae($);void 0===t[e]?t[e]=!0:delete t[e],ne($,t)}),[]),I=Object(n.useCallback)((function(e,t){x((function(a){return a.map((function(a){return a.id===e?Object(u.a)(Object(u.a)({},a),{},{comments:[].concat(Object(d.a)(a.comments),[t])}):a}))}));var a=ae(ee);a[e]?a[e]=[].concat(Object(d.a)(a[e]),[t]):a[e]=[t],ne(ee,a)}),[]),k=Object(n.useCallback)((function(e,t){x((function(a){return a.map((function(a){return a.id===e?Object(u.a)(Object(u.a)({},a),{},{comments:a.comments.filter((function(e){return e.id!==t}))}):a}))}));var a=ae(ee);a[e]=a[e].filter((function(e){return e.id!==t})),0===a[e].length&&delete a[e],ne(ee,a)}),[]);Object(n.useEffect)((function(){function e(){return(e=Object(m.a)(r.a.mark((function e(){var t,a,n,o,c,_;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),t=ae($),a=ae(ee),e.prev=3,e.next=6,O.getMovies({page:p.page});case 6:n=e.sent,o=n.data,c=o.movie_count,_=o.movies,g((function(e){return Object(u.a)(Object(u.a)({},e),{},{totalItems:c,totalPages:Math.ceil(c/e.limit)})})),x(_.map((function(e){var n=a[e.id]||[];return t[e.id]?Object(u.a)(Object(u.a)({},e),{},{isHide:!0,comments:n}):Object(u.a)(Object(u.a)({},e),{},{comments:n})}))),i(!1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),console.log("err: ",e.t0),i(!1);case 18:case"end":return e.stop()}}),e,null,[[3,14]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[p.page]);var y=Object(n.useMemo)((function(){return{pagination:p,isLoadingData:a,movies:f,handleChangePage:C,handleToggleHideMoview:V,setModalData:l,modalData:s,addComment:I,deleteComment:k}}),[a,p,f,C,s,V,I,k]);return Object(N.jsxs)(j.Provider,{value:y,children:[Object(N.jsx)(F,{}),te&&Object(o.createPortal)(Object(N.jsx)(U,{}),te)]})},oe=a(21),ce=a.n(oe),_e=s.a.bind(ce.a),se=function(){return Object(N.jsx)("div",{className:_e("App"),children:Object(N.jsx)("div",{className:_e("container"),children:Object(N.jsx)(ie,{})})})};a(29),a(30);c.a.render(Object(N.jsx)(i.a.StrictMode,{children:Object(N.jsx)(se,{})}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.5bf27ea9.chunk.js.map